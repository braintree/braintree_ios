# Braintree iOS Style Guide

While we use SwiftLint in the SDK to adhere to a general style, there are some guidelines that are not able to be captured by our linter rules. Those guidelines are defined in this document. 

These rules are in addition to, and should not contradict, the official [Swift API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/).

## Documentation Comments

Write a documentation comment for *all* declarations (ex: functions, methods, variables, constants, enumerations, structs, classes, and protocols).

Format documentation comments using Swift's [dialect of Markdown](https://developer.apple.com/documentation/xcode/formatting-your-documentation-content). Prefer styling generated by Xcode's `CMD+OPT+/`.

## Code Organization

Use `// MARK: -` to separate the contents of type definitions and extensions into the sections below, in order: 
  * `// MARK: - Public Properties` for `public` and `open` properties.
  * `// MARK: - Internal Properties` for `internal`, `fileprivate`, and `private` properties.
  * `// MARK: - Public Methods` for `public` and `open` methods.
  * `// MARK: - Internal Methods` for `internal`, `fileprivate`, and `private` methods.
  * `// MARK: - <PROTOCOL>` for protocol conformance. Each protocol conformance gets a separate `MARK`.
  * `// MARK: - <EXTENSION>` for additional extensions.

Use a newline before and after a `MARK`.

### Protocol Conformance

When conforming to a protocol, add a separate extension for the protocol methods.

**Preferred**:
```swift
class MyViewController: UIViewController {
  // class stuff here
}

// MARK: - UITableViewDataSource

extension MyViewController: UITableViewDataSource {
  // table view data source methods
}

// MARK: - UIScrollViewDelegate

extension MyViewController: UIScrollViewDelegate {
  // scroll view delegate methods
}
```

**Not Preferred**:
```swift
class MyViewController: UIViewController, UITableViewDataSource, UIScrollViewDelegate {
  // all methods
}
```

### Nested structs

When defining struct model types that depend on other custom struct definitions, put both definitions in the same file.

Special cases can be made for massive structs (over 100 lines), which is unlikely to occur.

**Preferred**:
```swift
// Musician.swift //
struct Musician: Codable {
    let name: String
    let recordLabel: RecordLabel
}

struct RecordLabel: Codable {
    let name: String
    let address: Address
}

struct Address: Codable {
    ...
}
```

**Not Preferred**:
```swift
// Musician.swift file
struct Musician: Codable {
    let name: String
    let recordLabel: RecordLabel
}
```

```swift
// RecordLabel.swift file
struct RecordLabel: Codable {
    let name: String
    let address: Address
}
```

```swift
// Address.swift file
struct Address: Codable {
    ...
}
```

## Spacing

### Curly Brackets

Method braces and other braces (`if`/`else`/`switch`/`while` etc.) always open on the same line as the statement but close on a new line.

**Preferred**:
```swift
if user.isHappy {
  // Do something
} else {
  // Do something else
}
```

**Not Preferred**:
```swift
if user.isHappy
{
  // Do something
}
else {
  // Do something else
}
```

### Colons

Colons have no space on the left and one space on the right. Exceptions are the ternary operator `? :`, empty dictionary `[:]` and `#selector` syntax `addTarget(_:action:)`.

**Preferred**:
```swift
class TestDatabase: Database {
  var data: [String: CGFloat] = ["A": 1.2, "B": 3.2]
}
```

**Not Preferred**:
```swift
class TestDatabase : Database {
  var data :[String:CGFloat] = ["A" : 1.2, "B":3.2]
}
```

### Newlines

There should be one blank line between methods and up to one blank line between type declarations to aid in visual clarity and organization. Whitespace within methods should separate functionality, but having too many sections in a method often means you should refactor into several methods.

There should be no blank lines after an opening brace or before a closing brace. An exception is when defining a class/struct/etc per our linter rules.

**Preferred**:
```swift
if isTrue {
    // do something
}
```

**Not Preferred**:
```swift
if isTrue {

    // do something

}
```

### Parentheses

Long function invocations should line break on each argument. Closing parentheses should appear on a line by themselves.

**Preferred**:
```swift
let user = try await getUser(
  for: userID,
  on: connection
)
```

**Not Preferred**:
```swift
let user = try await getUser(
  for: userID,
  on: connection)
```

## Types

### Syntactic Sugar

Prefer the shortcut versions of type declarations over the full generics syntax.

**Preferred**:
```swift
var deviceModels: [String]
var employees: [Int: String]
var faxNumber: Int?
```

**Not Preferred**:
```swift
var deviceModels: Array<String>
var employees: Dictionary<Int, String>
var faxNumber: Optional<Int>
```

## Naming

### Abbreviations

Acronyms and initialisms that commonly appear as all upper case in American English should be uniformly up- or down-cased according to case conventions.

**Preferred**:
```swift
var orderID
var dataUTF8
var requestHTTP
```

**Not Preferred**:
```swift
var orderId
var dataUtf8
var requestHttp
```

## Formatting

### Session Data Tasks

When launching session data tasks, prefer to resume the session inline vs creating a property for the task. This ensures that it is clear where we are kicking off the session to make the request.

**Preferred**:
```swift
session.dataTask(with: request) { [weak self] data, response, error in
    // Do request stuff
}.resume()
```

**Not Preferred**:
```swift
let task: URLSessionTask = session.dataTask(with: request) { [weak self] data, response, error in
    // Do request stuff
}

task.resume()
```

### Implicit Return
We prefer to always rely on implicit returns to cleanup our codebase overall.

**Preferred**:
```swift
func sendAString() -> String {
    "my-very-cool-string"
}

var aString: String {
    "my-very-cool-string"
}
```

**Not Preferred**:
```swift
func sendAString() -> String {
    return "my-very-cool-string"
}

var aString: String {
    return "my-very-cool-string"
}
```

### Use of Self
When not in an initalizer remove the use of self where possible. For initalizers we prefer the implicit self.

**Preferred**:
```swift
var myString: String
var myInt: Int

init(myString: String, myInt: Int) {
    self.myString = myString
    self. myInt = myInt
}

func sendMyStuff() -> [String] {
    [myString]
}
```

**Not Preferred**:
```swift
var myString: String
var myInt: Int

init(myString: String, myInt: Int) {
    myString = myString
    myInt = myInt
}

func sendMyStuff() -> [String] {
    [self.myString]
}
```
